<div class="search-bar">
  <input
    type="text"
    placeholder="Search by title or tag"
    [(ngModel)]="searchTerm"
    (ngModelChange)="filterEvents()"
  />
</div>

<h2 class="h2">Future Events</h2>
<div class="h2" *ngIf="futureEvents.length === 0">Nessun evento futuro</div>
<div class="cards-container" *ngIf="futureEvents.length > 0">
  <div class="card clickable-card" *ngFor="let event of futureEvents">
    <!-- Area cliccabile principale della card -->
    <a [routerLink]="['/eventi', event.id]" class="card-link">
      <div class="card-image-container">
        <img src="images/hero.png" alt="Immagine Evento" class="card-image" />
        <div class="event-date">{{ event.date | date: "dd MMM yyyy" }}</div>
      </div>
      <div class="card-details">
        <h3 class="event-title">{{ event.title }}</h3>
        <div class="event-time">{{ event.date | date: "dd MMM yyyy" }}</div>
        <p class="event-description">{{ event.description }}</p>
        <div class="tags">
          <span *ngFor="let tag of event.tags" class="tag">{{ tag.name }}</span>
        </div>
        <div class="booking-message" *ngIf="event.bookingMessage">
          {{ event.bookingMessage }}
        </div>
      </div>
    </a>

    <!-- Footer per eventi futuri -->
    <div class="card-footer">
      <span class="remaining-spots">
        {{ event.remaining }} posti mancanti
      </span>
      <!-- Il pulsante utilizza stopPropagation per evitare la navigazione -->
      <button
        class="participate-button"
        (click)="participate(event.id); $event.stopPropagation(); $event.preventDefault()"
      >
        Partecipa
      </button>
    </div>
  </div>
</div>

<h2 class="h2">Past Events</h2>
<div class="h2" *ngIf="pastEvents.length === 0">Nessun evento passato</div>
<div class="cards-container" *ngIf="pastEvents.length > 0">
  <div class="card clickable-card" *ngFor="let event of pastEvents">
    
    <!-- Area cliccabile principale della card -->
    <a [routerLink]="['/eventi', event.id]" class="card-link">
      <div class="card-image-container">
        <img src="images/hero.png" alt="Immagine Evento" class="card-image" />
        <div class="event-date">{{ event.date | date: "dd MMM yyyy" }}</div>
      </div>
      <div class="card-details">
        <h3 class="event-title">{{ event.title }}</h3>
        <div class="event-time">{{ event.date | date: "dd MMM yyyy" }}</div>
        <p class="event-description">{{ event.description }}</p>
        <div class="tags">
          <span *ngFor="let tag of event.tags" class="tag">{{ tag.name }}</span>
        </div>
        <div class="booking-message" *ngIf="event.bookingMessage">
          {{ event.bookingMessage }}
        </div>
      </div>
    </a>
    <!-- Non viene mostrato il footer per gli eventi passati -->
  </div>
</div>
